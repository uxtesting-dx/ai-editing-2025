import{i as Et,h as Rt,j as Pt,r as kt,x as rt,l as X,_ as V,n as B}from"./index.015517d8.js";const Lt=Et`
@keyframes sp-overlay-fade-in{0%{opacity:0;transform:var(--sp-overlay-from)}to{opacity:1;transform:translate(0)}}@keyframes sp-overlay-fade-out{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:var(--sp-overlay-from)}}:host{display:inline-block;left:-9999em;pointer-events:none;position:absolute;top:-9999em;z-index:1000}:host(:focus){outline:none}:host([placement=none]){height:100vh;height:-webkit-fill-available;height:fill-available;left:0;max-height:var(--swc-visual-viewport-height);position:fixed;top:0}#contents,sp-theme{height:100%}#contents{--swc-overlay-animation-distance:var(
--spectrum-picker-m-texticon-popover-offset-y,var(--spectrum-global-dimension-size-75)
);animation-duration:var(
--swc-test-duration,var(--spectrum-global-animation-duration-200,.16s)
);animation-timing-function:var(
--spectrum-global-animation-ease-out,ease-out
);box-sizing:border-box;display:inline-block;opacity:1;pointer-events:none;visibility:visible}:host([actual-placement*=top]) #contents{--sp-overlay-from:translateY(var(--spectrum-global-dimension-size-75));align-items:flex-end;display:inline-flex;padding-top:var(--swc-overlay-animation-distance)}:host([actual-placement*=right]) #contents{--sp-overlay-from:translateX(calc(var(--spectrum-global-dimension-size-75)*-1));padding-right:var(--swc-overlay-animation-distance)}:host([actual-placement*=bottom]) #contents{--sp-overlay-from:translateY(calc(var(--spectrum-global-dimension-size-75)*-1));padding-bottom:var(--swc-overlay-animation-distance)}:host([actual-placement*=left]) #contents{--sp-overlay-from:translateX(var(--spectrum-global-dimension-size-75));padding-left:var(--swc-overlay-animation-distance)}:host([animating]) ::slotted(*){pointer-events:none}:host(:not([animating])) ::slotted(*){pointer-events:auto}#contents ::slotted(*){position:relative}
`;var Ft=Lt;const M=e=>{if(!e)return null;const t=e.closest("active-overlay");if(t)return t;const o=e.getRootNode();return o.host?M(o.host):null},tt=(e,t)=>{const o=[];if(!e)return[];for(const n of t)!n.root||M(n.root)===e&&(o.push(n),o.push(...tt(n,t)));return o};function S(e){return e.split("-")[0]}function z(e){return e.split("-")[1]}function U(e){return["top","bottom"].includes(S(e))?"x":"y"}function nt(e){return e==="y"?"height":"width"}function at(e,t,o){let{reference:n,floating:i}=e;const s=n.x+n.width/2-i.width/2,r=n.y+n.height/2-i.height/2,a=U(t),l=nt(a),h=n[l]/2-i[l]/2,d=S(t),c=a==="x";let f;switch(d){case"top":f={x:s,y:n.y-i.height};break;case"bottom":f={x:s,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:r};break;case"left":f={x:n.x-i.width,y:r};break;default:f={x:n.x,y:n.y}}switch(z(t)){case"start":f[a]-=h*(o&&c?-1:1);break;case"end":f[a]+=h*(o&&c?-1:1);break}return f}const Mt=async(e,t,o)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:r}=o,a=await(r.isRTL==null?void 0:r.isRTL(t));let l=await r.getElementRects({reference:e,floating:t,strategy:i}),{x:h,y:d}=at(l,n,a),c=n,f={},u=0;for(let p=0;p<s.length;p++){const{name:m,fn:v}=s[p],{x:y,y:g,data:b,reset:w}=await v({x:h,y:d,initialPlacement:n,placement:c,strategy:i,middlewareData:f,rects:l,platform:r,elements:{reference:e,floating:t}});if(h=y!=null?y:h,d=g!=null?g:d,f={...f,[m]:{...f[m],...b}},w&&u<=50){u++,typeof w=="object"&&(w.placement&&(c=w.placement),w.rects&&(l=w.rects===!0?await r.getElementRects({reference:e,floating:t,strategy:i}):w.rects),{x:h,y:d}=at(l,c,a)),p=-1;continue}}return{x:h,y:d,placement:c,strategy:i,middlewareData:f}};function Dt(e){return{top:0,right:0,bottom:0,left:0,...e}}function gt(e){return typeof e!="number"?Dt(e):{top:e,right:e,bottom:e,left:e}}function Y(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function it(e,t){var o;t===void 0&&(t={});const{x:n,y:i,platform:s,rects:r,elements:a,strategy:l}=e,{boundary:h="clippingAncestors",rootBoundary:d="viewport",elementContext:c="floating",altBoundary:f=!1,padding:u=0}=t,p=gt(u),v=a[f?c==="floating"?"reference":"floating":c],y=Y(await s.getClippingRect({element:(o=await(s.isElement==null?void 0:s.isElement(v)))==null||o?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:h,rootBoundary:d,strategy:l})),g=Y(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:c==="floating"?{...r.floating,x:n,y:i}:r.reference,offsetParent:await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),strategy:l}):r[c]);return{top:y.top-g.top+p.top,bottom:g.bottom-y.bottom+p.bottom,left:y.left-g.left+p.left,right:g.right-y.right+p.right}}const St=Math.min,P=Math.max;function et(e,t,o){return P(e,St(t,o))}const Wt=e=>({name:"arrow",options:e,async fn(t){const{element:o,padding:n=0}=e!=null?e:{},{x:i,y:s,placement:r,rects:a,platform:l}=t;if(o==null)return{};const h=gt(n),d={x:i,y:s},c=U(r),f=z(r),u=nt(c),p=await l.getDimensions(o),m=c==="y"?"top":"left",v=c==="y"?"bottom":"right",y=a.reference[u]+a.reference[c]-d[c]-a.floating[u],g=d[c]-a.reference[c],b=await(l.getOffsetParent==null?void 0:l.getOffsetParent(o));let w=b?c==="y"?b.clientHeight||0:b.clientWidth||0:0;w===0&&(w=a.floating[u]);const L=y/2-g/2,F=h[m],W=w-p[u]-h[v],T=w/2-p[u]/2+L,C=et(F,T,W),q=(f==="start"?h[m]:h[v])>0&&T!==C&&a.reference[u]<=a.floating[u]?T<F?F-T:W-T:0;return{[c]:d[c]-q,data:{[c]:C,centerOffset:T-C}}}}),Nt={left:"right",right:"left",bottom:"top",top:"bottom"};function G(e){return e.replace(/left|right|bottom|top/g,t=>Nt[t])}function _t(e,t,o){o===void 0&&(o=!1);const n=z(e),i=U(e),s=nt(i);let r=i==="x"?n===(o?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(r=G(r)),{main:r,cross:G(r)}}const Ht={start:"end",end:"start"};function lt(e){return e.replace(/start|end/g,t=>Ht[t])}function $t(e){const t=G(e);return[lt(e),t,lt(t)]}const ct=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var o;const{placement:n,middlewareData:i,rects:s,initialPlacement:r,platform:a,elements:l}=t,{mainAxis:h=!0,crossAxis:d=!0,fallbackPlacements:c,fallbackStrategy:f="bestFit",flipAlignment:u=!0,...p}=e,m=S(n),y=c||(m===r||!u?[G(r)]:$t(r)),g=[r,...y],b=await it(t,p),w=[];let L=((o=i.flip)==null?void 0:o.overflows)||[];if(h&&w.push(b[m]),d){const{main:C,cross:N}=_t(n,s,await(a.isRTL==null?void 0:a.isRTL(l.floating)));w.push(b[C],b[N])}if(L=[...L,{placement:n,overflows:w}],!w.every(C=>C<=0)){var F,W;const C=((F=(W=i.flip)==null?void 0:W.index)!=null?F:0)+1,N=g[C];if(N)return{data:{index:C,overflows:L},reset:{placement:N}};let _="bottom";switch(f){case"bestFit":{var T;const q=(T=L.map(K=>[K,K.overflows.filter(H=>H>0).reduce((H,At)=>H+At,0)]).sort((K,H)=>K[1]-H[1])[0])==null?void 0:T[0].placement;q&&(_=q);break}case"initialPlacement":_=r;break}if(n!==_)return{reset:{placement:_}}}return{}}}};async function It(e,t){const{placement:o,platform:n,elements:i}=e,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),r=S(o),a=z(o),l=U(o)==="x",h=["left","top"].includes(r)?-1:1,d=s&&l?-1:1,c=typeof t=="function"?t(e):t;let{mainAxis:f,crossAxis:u,alignmentAxis:p}=typeof c=="number"?{mainAxis:c,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...c};return a&&typeof p=="number"&&(u=a==="end"?p*-1:p),l?{x:u*d,y:f*h}:{x:f*h,y:u*d}}const Vt=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:o,y:n}=t,i=await It(t,e);return{x:o+i.x,y:n+i.y,data:i}}}};function Bt(e){return e==="x"?"y":"x"}const zt=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:o,y:n,placement:i}=t,{mainAxis:s=!0,crossAxis:r=!1,limiter:a={fn:v=>{let{x:y,y:g}=v;return{x:y,y:g}}},...l}=e,h={x:o,y:n},d=await it(t,l),c=U(S(i)),f=Bt(c);let u=h[c],p=h[f];if(s){const v=c==="y"?"top":"left",y=c==="y"?"bottom":"right",g=u+d[v],b=u-d[y];u=et(g,u,b)}if(r){const v=f==="y"?"top":"left",y=f==="y"?"bottom":"right",g=p+d[v],b=p-d[y];p=et(g,p,b)}const m=a.fn({...t,[c]:u,[f]:p});return{...m,data:{x:m.x-o,y:m.y-n}}}}},Ut=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:o,rects:n,platform:i,elements:s}=t,{apply:r,...a}=e,l=await it(t,a),h=S(o),d=z(o);let c,f;h==="top"||h==="bottom"?(c=h,f=d===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(f=h,c=d==="end"?"top":"bottom");const u=P(l.left,0),p=P(l.right,0),m=P(l.top,0),v=P(l.bottom,0),y={availableHeight:n.floating.height-(["left","right"].includes(o)?2*(m!==0||v!==0?m+v:P(l.top,l.bottom)):l[c]),availableWidth:n.floating.width-(["top","bottom"].includes(o)?2*(u!==0||p!==0?u+p:P(l.left,l.right)):l[f])},g=await i.getDimensions(s.floating);r==null||r({...t,...y});const b=await i.getDimensions(s.floating);return g.width!==b.width||g.height!==b.height?{reset:{rects:!0}}:{}}}};function yt(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function A(e){if(e==null)return window;if(!yt(e)){const t=e.ownerDocument;return t&&t.defaultView||window}return e}function j(e){return A(e).getComputedStyle(e)}function O(e){return yt(e)?"":e?(e.nodeName||"").toLowerCase():""}function vt(){const e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(t=>t.brand+"/"+t.version).join(" "):navigator.userAgent}function x(e){return e instanceof A(e).HTMLElement}function D(e){return e instanceof A(e).Element}function jt(e){return e instanceof A(e).Node}function st(e){if(typeof ShadowRoot=="undefined")return!1;const t=A(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Z(e){const{overflow:t,overflowX:o,overflowY:n}=j(e);return/auto|scroll|overlay|hidden/.test(t+n+o)}function qt(e){return["table","td","th"].includes(O(e))}function wt(e){const t=/firefox/i.test(vt()),o=j(e);return o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].includes(o.willChange)||t&&o.willChange==="filter"||t&&(o.filter?o.filter!=="none":!1)}function bt(){return!/^((?!chrome|android).)*safari/i.test(vt())}const ht=Math.min,$=Math.max,Q=Math.round;function k(e,t,o){var n,i,s,r;t===void 0&&(t=!1),o===void 0&&(o=!1);const a=e.getBoundingClientRect();let l=1,h=1;t&&x(e)&&(l=e.offsetWidth>0&&Q(a.width)/e.offsetWidth||1,h=e.offsetHeight>0&&Q(a.height)/e.offsetHeight||1);const d=D(e)?A(e):window,c=!bt()&&o,f=(a.left+(c&&(n=(i=d.visualViewport)==null?void 0:i.offsetLeft)!=null?n:0))/l,u=(a.top+(c&&(s=(r=d.visualViewport)==null?void 0:r.offsetTop)!=null?s:0))/h,p=a.width/l,m=a.height/h;return{width:p,height:m,top:u,right:f+p,bottom:u+m,left:f,x:f,y:u}}function R(e){return((jt(e)?e.ownerDocument:e.document)||window.document).documentElement}function J(e){return D(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Ct(e){return k(R(e)).left+J(e).scrollLeft}function Kt(e){const t=k(e);return Q(t.width)!==e.offsetWidth||Q(t.height)!==e.offsetHeight}function Xt(e,t,o){const n=x(t),i=R(t),s=k(e,n&&Kt(t),o==="fixed");let r={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(n||!n&&o!=="fixed")if((O(t)!=="body"||Z(i))&&(r=J(t)),x(t)){const l=k(t,!0);a.x=l.x+t.clientLeft,a.y=l.y+t.clientTop}else i&&(a.x=Ct(i));return{x:s.left+r.scrollLeft-a.x,y:s.top+r.scrollTop-a.y,width:s.width,height:s.height}}function xt(e){return O(e)==="html"?e:e.assignedSlot||e.parentNode||(st(e)?e.host:null)||R(e)}function dt(e){return!x(e)||getComputedStyle(e).position==="fixed"?null:e.offsetParent}function Yt(e){let t=xt(e);for(st(t)&&(t=t.host);x(t)&&!["html","body"].includes(O(t));){if(wt(t))return t;t=t.parentNode}return null}function ot(e){const t=A(e);let o=dt(e);for(;o&&qt(o)&&getComputedStyle(o).position==="static";)o=dt(o);return o&&(O(o)==="html"||O(o)==="body"&&getComputedStyle(o).position==="static"&&!wt(o))?t:o||Yt(e)||t}function ft(e){if(x(e))return{width:e.offsetWidth,height:e.offsetHeight};const t=k(e);return{width:t.width,height:t.height}}function Gt(e){let{rect:t,offsetParent:o,strategy:n}=e;const i=x(o),s=R(o);if(o===s)return t;let r={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if((i||!i&&n!=="fixed")&&((O(o)!=="body"||Z(s))&&(r=J(o)),x(o))){const l=k(o,!0);a.x=l.x+o.clientLeft,a.y=l.y+o.clientTop}return{...t,x:t.x-r.scrollLeft+a.x,y:t.y-r.scrollTop+a.y}}function Qt(e,t){const o=A(e),n=R(e),i=o.visualViewport;let s=n.clientWidth,r=n.clientHeight,a=0,l=0;if(i){s=i.width,r=i.height;const h=bt();(h||!h&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:r,x:a,y:l}}function Zt(e){var t;const o=R(e),n=J(e),i=(t=e.ownerDocument)==null?void 0:t.body,s=$(o.scrollWidth,o.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),r=$(o.scrollHeight,o.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0);let a=-n.scrollLeft+Ct(e);const l=-n.scrollTop;return j(i||o).direction==="rtl"&&(a+=$(o.clientWidth,i?i.clientWidth:0)-s),{width:s,height:r,x:a,y:l}}function Tt(e){const t=xt(e);return["html","body","#document"].includes(O(t))?e.ownerDocument.body:x(t)&&Z(t)?t:Tt(t)}function Ot(e,t){var o;t===void 0&&(t=[]);const n=Tt(e),i=n===((o=e.ownerDocument)==null?void 0:o.body),s=A(n),r=i?[s].concat(s.visualViewport||[],Z(n)?n:[]):n,a=t.concat(r);return i?a:a.concat(Ot(r))}function Jt(e,t){const o=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(o&&st(o)){let n=t;do{if(n&&e===n)return!0;n=n.parentNode||n.host}while(n)}return!1}function te(e,t){const o=k(e,!1,t==="fixed"),n=o.top+e.clientTop,i=o.left+e.clientLeft;return{top:n,left:i,x:i,y:n,right:i+e.clientWidth,bottom:n+e.clientHeight,width:e.clientWidth,height:e.clientHeight}}function ut(e,t,o){return t==="viewport"?Y(Qt(e,o)):D(t)?te(t,o):Y(Zt(R(e)))}function ee(e){const t=Ot(e),n=["absolute","fixed"].includes(j(e).position)&&x(e)?ot(e):e;return D(n)?t.filter(i=>D(i)&&Jt(i,n)&&O(i)!=="body"):[]}function oe(e){let{element:t,boundary:o,rootBoundary:n,strategy:i}=e;const r=[...o==="clippingAncestors"?ee(t):[].concat(o),n],a=r[0],l=r.reduce((h,d)=>{const c=ut(t,d,i);return h.top=$(c.top,h.top),h.right=ht(c.right,h.right),h.bottom=ht(c.bottom,h.bottom),h.left=$(c.left,h.left),h},ut(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}const ne={getClippingRect:oe,convertOffsetParentRelativeRectToViewportRelativeRect:Gt,isElement:D,getDimensions:ft,getOffsetParent:ot,getDocumentElement:R,getElementRects:e=>{let{reference:t,floating:o,strategy:n}=e;return{reference:Xt(t,ot(o),n),floating:{...ft(o),x:0,y:0}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>j(e).direction==="rtl"},ie=(e,t,o)=>Mt(e,t,{platform:ne,...o}),pt={initial:"idle",states:{idle:{on:{active:"active"}},active:{on:{hiding:"hiding",idle:"idle"}},hiding:{on:{dispose:"dispose"}},dispose:{on:{disposed:"disposed"}},disposed:{on:{}}}},mt=(e,t)=>e?t&&pt.states[e].on[t]||e:pt.initial,se=e=>{var t;return(t={left:["right","bottom","top"],"left-start":["right-start","bottom","top"],"left-end":["right-end","bottom","top"],right:["left","bottom","top"],"right-start":["left-start","bottom","top"],"right-end":["left-end","bottom","top"],top:["bottom","left","right"],"top-start":["bottom-start","left","right"],"top-end":["bottom-end","left","right"],bottom:["top","left","right"],"bottom-start":["top-start","left","right"],"bottom-end":["top-end","left","right"]}[e])!==null&&t!==void 0?t:[e]};class E extends Rt{constructor(){super(),this._state=mt(),this.animating=!1,this.theme={},this.tabbingAway=!1,this.offset=6,this.skidding=0,this.interaction="hover",this.positionAnimationFrame=0,this.willNotifyClosed=!1,this.isConstrained=!1,this.updateOverlayPosition=async()=>{if(!this.placement||this.placement==="none")return;await(document.fonts?document.fonts.ready:Promise.resolve());function t(d){const c=window.devicePixelRatio||1;return Math.round(d*c)/c||-1e4}const o=8,n=100,i=this.virtualTrigger?ct({padding:o,fallbackPlacements:se(this.placement)}):ct({padding:o}),s=[Vt({mainAxis:this.offset,crossAxis:this.skidding}),zt({padding:o}),i,Ut({padding:o,apply:({availableWidth:d,availableHeight:c,rects:{floating:f}})=>{const u=Math.max(n,Math.floor(c)),p=f.height;this.initialHeight=!this.isConstrained&&!this.virtualTrigger?p:this.initialHeight||p,this.isConstrained=p<this.initialHeight||u<=p;const m=this.isConstrained?`${u}px`:"";Object.assign(this.style,{maxWidth:`${Math.floor(d)}px`,maxHeight:m,height:m})}})];this.overlayContentTip&&s.push(Wt({element:this.overlayContentTip}));const{x:r,y:a,placement:l,middlewareData:h}=await ie(this.virtualTrigger||this.trigger,this,{placement:this.placement,middleware:s});if(Object.assign(this.style,{top:"0px",left:"0px",transform:`translate(${t(r)}px, ${t(a)}px)`}),l!==this.getAttribute("actual-placement")&&(this.setAttribute("actual-placement",l),this.overlayContent.setAttribute("placement",l)),this.overlayContentTip&&h.arrow){const{x:d,y:c}=h.arrow;Object.assign(this.overlayContentTip.style,{left:d!=null?`${t(d)}px`:"",top:c!=null?`${t(c)}px`:"",right:"",bottom:""})}},this.handleInlineTriggerKeydown=t=>{const{code:o,shiftKey:n}=t;if(o==="Tab"){if(n){this.tabbingAway=!0,this.dispatchEvent(new Event("close"));return}t.stopPropagation(),t.preventDefault(),this.focus()}},this.stealOverlayContentPromise=Promise.resolve(),this.stealOverlayContentPromise=new Promise(t=>this.stealOverlayContentResolver=t)}get state(){return this._state}set state(t){const o=mt(this.state,t);o!==this.state&&(this._state=o,this.state==="active"||this.state==="hiding"?this.setAttribute("state",this.state):this.removeAttribute("state"))}async focus(){const t=Pt(this);if(t){t.updateComplete&&await t.updateComplete;const o=this.getRootNode().activeElement;(o===this||!this.contains(o))&&t.focus()}else super.focus();this.removeAttribute("tabindex")}get hasTheme(){return!!this.theme.color||!!this.theme.scale||!!this.theme.lang}static get styles(){return[Ft]}get hasModalRoot(){return!!this._modalRoot}feature(){this.tabIndex=-1;const t=M(this.trigger);t&&t.slot==="open"&&(this._modalRoot=t._modalRoot||t),(this.interaction==="modal"||this._modalRoot)&&(this.slot="open",this.interaction==="modal"&&this.setAttribute("aria-modal","true"),this._modalRoot&&(t==null||t.feature()))}obscure(t){if(this.slot&&t==="modal"){if(this.removeAttribute("slot"),this.removeAttribute("aria-modal"),this.interaction!=="modal"){const o=M(this.trigger);return this._modalRoot=o==null?void 0:o.obscure(t),this._modalRoot}return this}}async willUpdate(){if(this.hasUpdated||!this.overlayContent||!this.trigger)return;this.stealOverlayContent(this.overlayContent),this.state="active",this.feature(),this.placement==="none"?this.style.setProperty("--swc-visual-viewport-height",`${window.innerHeight}px`):this.placement&&(await this.updateOverlayPosition(),document.addEventListener("sp-update-overlays",this.updateOverlayPosition),window.addEventListener("scroll",this.updateOverlayPosition));const t=[];this.placement&&this.placement!=="none"&&t.push(this.applyContentAnimation("sp-overlay-fade-in")),typeof this.overlayContent.updateComplete!="undefined"&&t.push(this.overlayContent.updateComplete),this.childrenReady=Promise.all(t)}async openCallback(t){await this.updateComplete,this.receivesFocus&&await this.focus(),await t(),this.trigger.dispatchEvent(new CustomEvent("sp-opened",{bubbles:!0,composed:!0,cancelable:!0,detail:{interaction:this.interaction}}))}open(t){this.extractDetail(t)}extractDetail(t){this.overlayContent=t.content,this.overlayContentTip=t.contentTip,this.trigger=t.trigger,this.virtualTrigger=t.virtualTrigger,this.placement=t.placement,this.offset=t.offset,this.skidding=t.skidding||0,this.interaction=t.interaction,this.theme=t.theme,this.receivesFocus=t.receivesFocus,this.root=t.root}dispose(){this.state==="dispose"&&(this.timeout&&(clearTimeout(this.timeout),delete this.timeout),this.trigger.removeEventListener("keydown",this.handleInlineTriggerKeydown),this.returnOverlayContent(),this.state="disposed",this.willNotifyClosed&&(this.overlayContent.dispatchEvent(new Event("sp-overlay-closed")),this.willNotifyClosed=!1))}stealOverlayContent(t){this.originalPlacement=t.getAttribute("placement"),this.restoreContent=kt([t],this,{position:"beforeend",prepareCallback:o=>{const n=o.slot,i=o.placement;return o.removeAttribute("slot"),s=>{s.slot=n,s.placement=i}}}),this.stealOverlayContentResolver()}returnOverlayContent(){if(!this.restoreContent)return;const[t]=this.restoreContent();this.restoreContent=void 0,this.willNotifyClosed=!0,this.originalPlacement&&(t.setAttribute("placement",this.originalPlacement),delete this.originalPlacement)}async hide(t=!0){this.state="hiding",t&&await this.applyContentAnimation("sp-overlay-fade-out"),this.state="dispose"}schedulePositionUpdate(){cancelAnimationFrame(this.positionAnimationFrame),this.positionAnimationFrame=requestAnimationFrame(()=>this.updateOverlayPosition())}onSlotChange(){this.schedulePositionUpdate()}applyContentAnimation(t){return this.placement==="none"?Promise.resolve(!0):new Promise(o=>{const n=this.shadowRoot.querySelector("#contents"),i=s=>{t===s.animationName&&(n.removeEventListener("animationend",i),n.removeEventListener("animationcancel",i),this.animating=!1,o(s.type==="animationcancel"))};n.addEventListener("animationend",i),n.addEventListener("animationcancel",i),n.style.animationName=t,this.animating=!0})}renderTheme(t){const{color:o,scale:n,lang:i,theme:s}=this.theme;return rt`
            <sp-theme
                theme=${X(s)}
                color=${X(o)}
                scale=${X(n)}
                lang=${X(i)}
                part="theme"
            >
                ${t}
            </sp-theme>
        `}render(){const t=rt`
            <div id="contents">
                <slot @slotchange=${this.onSlotChange}></slot>
            </div>
        `;return this.hasTheme?this.renderTheme(t):t}static create(t){const o=new E;return t.content&&o.open(t),o}async getUpdateComplete(){const t=[super.getUpdateComplete(),this.stealOverlayContentPromise];this.childrenReady&&t.push(this.childrenReady);const[o]=await Promise.all(t);return o}disconnectedCallback(){document.removeEventListener("sp-update-overlays",this.updateOverlayPosition),window.removeEventListener("scroll",this.updateOverlayPosition),super.disconnectedCallback()}}V([B()],E.prototype,"_state",void 0);V([B({reflect:!0,type:Boolean})],E.prototype,"animating",void 0);V([B({reflect:!0})],E.prototype,"placement",void 0);V([B({attribute:!1})],E.prototype,"theme",void 0);V([B({attribute:!1})],E.prototype,"receivesFocus",void 0);const re=1e3,ae=1e3;class le{constructor(t={}){this.warmUpDelay=re,this.coolDownDelay=ae,this.isWarm=!1,this.timeout=0,Object.assign(this,t)}async openTimer(t){if(this.cancelCooldownTimer(),!this.component||t!==this.component)return this.component&&(this.close(this.component),this.cancelCooldownTimer()),this.component=t,this.isWarm?!1:(this.promise=new Promise(o=>{this.resolve=o,this.timeout=window.setTimeout(()=>{this.resolve&&(this.resolve(!1),this.isWarm=!0)},this.warmUpDelay)}),this.promise);if(this.promise)return this.promise;throw new Error("Inconsistent state")}close(t){this.component&&this.component===t&&(this.resetCooldownTimer(),this.timeout>0&&(clearTimeout(this.timeout),this.timeout=0),this.resolve&&(this.resolve(!0),delete this.resolve),delete this.promise,delete this.component)}resetCooldownTimer(){this.isWarm&&(this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),this.cooldownTimeout=window.setTimeout(()=>{this.isWarm=!1,delete this.cooldownTimeout},this.coolDownDelay))}cancelCooldownTimer(){this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),delete this.cooldownTimeout}}customElements.define("active-overlay",E);const ce=(e,t)=>{let o=document.elementFromPoint(e,t);for(;o!=null&&o.shadowRoot;){const n=o.shadowRoot.elementFromPoint(e,t);if(!n||n===o)break;o=n}return o};function he(e){return e.button===0}function de(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}class fe{constructor(){this.overlays=[],this.preventMouseRootClose=!1,this.root=document.body,this.handlingResize=!1,this.overlayTimer=new le,this.canTabTrap=!0,this.trappingInited=!1,this._eventsAreBound=!1,this._bodyMarginsApplied=!1,this.forwardContextmenuEvent=async t=>{var o;const n=this.overlays[this.overlays.length-1];!this.trappingInited||n.interaction!=="modal"||t.target!==this.overlayHolder||(t.stopPropagation(),t.preventDefault(),await this.closeTopOverlay(),(o=ce(t.clientX,t.clientY))===null||o===void 0||o.dispatchEvent(new MouseEvent("contextmenu",t)))},this.handleOverlayClose=t=>{const{root:o}=t;!o||this.closeOverlaysForRoot(o)},this.handleMouseCapture=t=>{const o=this.topOverlay;if(!t.target||!o||!o.overlayContent||de(t)||!he(t)){this.preventMouseRootClose=!0;return}if(t.target instanceof Node){if(t.composedPath().indexOf(o.overlayContent)>=0){this.preventMouseRootClose=!0;return}this.preventMouseRootClose=!1}},this._doesNotCloseOnFirstClick=!1,this.handleMouse=t=>{var o;if(this._doesNotCloseOnFirstClick){this._doesNotCloseOnFirstClick=!1;return}if(this.preventMouseRootClose||t.defaultPrevented)return;this.closeTopOverlay();const n=[];let i=(o=this.topOverlay)===null||o===void 0?void 0:o.root,s=M(i);for(;i&&s;)n.push(s),s=M(i),i=s==null?void 0:s.root;s&&n.push(s),n.forEach(r=>this.hideAndCloseOverlay(r))},this.handleKeyUp=t=>{t.code==="Escape"&&this.closeTopOverlay()},this.handleResize=()=>{this.handlingResize||(this.handlingResize=!0,requestAnimationFrame(async()=>{const t=this.overlays.map(o=>o.updateOverlayPosition());await Promise.all(t),this.handlingResize=!1}))}}initTabTrapping(){if(this.trappingInited)return;if(this.trappingInited=!0,this.document.body.shadowRoot){this.canTabTrap=!1;return}if(this.document.body.attachShadow({mode:"open"}),!this.document.body.shadowRoot)return;const t=this.document.body.shadowRoot;t.innerHTML=`
            <style>
            :host {
                position: relative;
            }
            #actual {
                position: relative;
                height: calc(100% - var(--swc-body-margins-block, 0px));
                z-index: 0;
                min-height: calc(100vh - var(--swc-body-margins-block, 0px));
            }
            #holder {
                display: none;
                align-items: center;
                justify-content: center;
                flex-flow: column;
                width: 100%;
                height: 100%;
                position: absolute;
                top: 0;
                left: 0;
            }
            [name="open"]::slotted(*) {
                pointer-events: all;
            }
            #actual[aria-hidden] + #holder {
                display: flex;
            }
            </style>
            <div id="actual"><slot></slot></div>
            <div id="holder"><slot name="open"></slot></div>
        `,this.tabTrapper=t.querySelector("#actual"),this.overlayHolder=t.querySelector("#holder"),this.tabTrapper.attachShadow({mode:"open"}),this.tabTrapper.shadowRoot&&(this.tabTrapper.shadowRoot.innerHTML="<slot></slot>"),this.overlayHolder.addEventListener("contextmenu",this.forwardContextmenuEvent,!0),requestAnimationFrame(()=>{this.applyBodyMargins(),new ResizeObserver(()=>{this.applyBodyMargins()}).observe(document.body)})}applyBodyMargins(){const{marginLeft:t,marginRight:o,marginTop:n,marginBottom:i}=getComputedStyle(document.body),s=parseFloat(t)===0&&parseFloat(o)===0&&parseFloat(n)===0&&parseFloat(i)===0;s&&!this._bodyMarginsApplied||(this.tabTrapper.style.setProperty("--swc-body-margins-inline",`calc(${t} + ${o})`),this.tabTrapper.style.setProperty("--swc-body-margins-block",`calc(${n} + ${i})`),this._bodyMarginsApplied=!s)}startTabTrapping(){this.initTabTrapping(),this.canTabTrap&&(this.tabTrapper.tabIndex=-1,this.tabTrapper.setAttribute("aria-hidden","true"))}stopTabTrapping(){!this.canTabTrap||!this.trappingInited||(this.tabTrapper.removeAttribute("tabindex"),this.tabTrapper.removeAttribute("aria-hidden"))}get document(){return this.root.ownerDocument||document}get topOverlay(){return this.overlays.slice(-1)[0]}findOverlayForContent(t){for(const o of this.overlays)if(t===o.overlayContent)return o}addEventListeners(){this._eventsAreBound||(this._eventsAreBound=!0,this.document.addEventListener("click",this.handleMouseCapture,!0),this.document.addEventListener("click",this.handleMouse),this.document.addEventListener("keyup",this.handleKeyUp),this.document.addEventListener("sp-overlay-close",this.handleOverlayClose),window.addEventListener("resize",this.handleResize))}isClickOverlayActiveForTrigger(t){return this.overlays.some(o=>t===o.trigger&&o.interaction==="click")}async openOverlay(t){if(this.addEventListeners(),this.findOverlayForContent(t.content))return!1;t.notImmediatelyClosable&&(this._doesNotCloseOnFirstClick=!0),t.interaction==="modal"&&this.startTabTrapping();const o=t.content;if(o.overlayWillOpenCallback){const{trigger:i}=t;o.overlayWillOpenCallback({trigger:i})}if(t.delayed){const s=[this.overlayTimer.openTimer(t.content)];t.abortPromise&&s.push(t.abortPromise);const r=await Promise.race(s);if(r){if(o.overlayOpenCancelledCallback){const{trigger:a}=t;o.overlayOpenCancelledCallback({trigger:a})}return r}}if(t.root&&this.closeOverlaysForRoot(t.root),t.interaction==="click")this.closeAllHoverOverlays();else if(t.interaction==="hover"&&this.isClickOverlayActiveForTrigger(t.trigger))return!0;const n=E.create(t);return this.overlays.length&&this.overlays[this.overlays.length-1].obscure(n.interaction),document.body.appendChild(n),new Promise(i=>requestAnimationFrame(i)).then(async()=>{this.overlays.push(n),await n.updateComplete,this.addOverlayEventListeners(n),typeof o.open!="undefined"&&(o.open=!0);let i=()=>{};if(o.overlayOpenCallback){const{trigger:s}=n,{overlayOpenCallback:r}=o;i=async()=>await r({trigger:s})}return await n.openCallback(i),!1})}addOverlayEventListeners(t){switch(t.addEventListener("close",()=>{this.hideAndCloseOverlay(t,!0)}),t.interaction){case"replace":this.addReplaceOverlayEventListeners(t);break;case"inline":this.addInlineOverlayEventListeners(t);break}}addReplaceOverlayEventListeners(t){t.addEventListener("keydown",o=>{const{code:n}=o;n==="Tab"&&(o.stopPropagation(),this.closeOverlay(t.overlayContent),t.tabbingAway=!0,t.trigger.focus(),t.trigger.dispatchEvent(new KeyboardEvent("keydown",o)))})}addInlineOverlayEventListeners(t){t.trigger.addEventListener("keydown",t.handleInlineTriggerKeydown),t.addEventListener("keydown",o=>{const{code:n,shiftKey:i}=o;if(n!=="Tab")return;if(t.tabbingAway=!0,i){const r=document.createElement("span");r.tabIndex=-1,t.trigger.hasAttribute("slot")&&(r.slot=t.trigger.slot),t.trigger.insertAdjacentElement("afterend",r),r.focus(),r.remove();return}o.stopPropagation();const s=t.trigger;typeof s.open!="undefined"&&(s.open=!1),this.closeOverlay(t.overlayContent),t.trigger.focus()})}closeOverlay(t){this.overlayTimer.close(t),requestAnimationFrame(()=>{const o=this.findOverlayForContent(t),n=[o];n.push(...tt(o,this.overlays)),n.forEach(i=>this.hideAndCloseOverlay(i))})}closeAllHoverOverlays(){for(const t of this.overlays)t.interaction==="hover"&&this.hideAndCloseOverlay(t,!1)}closeOverlaysForRoot(t){const o=[];for(const n of this.overlays)n.root&&n.root===t&&(o.push(n),o.push(...tt(n,this.overlays)));o.forEach(n=>this.hideAndCloseOverlay(n,!0,!0))}async manageFocusAfterCloseWhenOverlaysRemain(t){const o=this.overlays[this.overlays.length-1];if(o.feature(),o.interaction==="modal"||o.hasModalRoot){if(t)return;await o.focus()}else this.stopTabTrapping()}manageFocusAfterCloseWhenLastOverlay(t){this.stopTabTrapping();const o=t.interaction==="modal",n=t.receivesFocus==="auto",i=t.interaction==="replace",s=t.interaction==="inline",r=(i||s)&&!t.tabbingAway;if(t.tabbingAway=!1,!o&&!n&&!r)return;const l=t.overlayContent.getRootNode().activeElement;let h,d;const c=()=>t.overlayContent.contains(l),f=()=>(h=t.trigger.getRootNode(),d=h.activeElement,h.contains(d)),u=()=>h.host&&h.host===d;(o||c()||f()||u())&&t.trigger.focus()}async hideAndCloseOverlay(t,o,n){if(!t)return;const i=t.overlayContent;if(typeof i.overlayWillCloseCallback!="undefined"){const{trigger:r}=t;if(i.overlayWillCloseCallback({trigger:r}))return}if(await t.hide(o),typeof i.open!="undefined"&&(i.open=!1),i.overlayCloseCallback){const{trigger:r}=t;await i.overlayCloseCallback({trigger:r})}if(t.state!="dispose")return;const s=this.overlays.indexOf(t);s>=0&&this.overlays.splice(s,1),this.overlays.length?await this.manageFocusAfterCloseWhenOverlaysRemain(n):this.manageFocusAfterCloseWhenLastOverlay(t),t.remove(),t.dispose(),t.trigger.dispatchEvent(new CustomEvent("sp-closed",{bubbles:!0,composed:!0,cancelable:!0,detail:{interaction:t.interaction}}))}closeTopOverlay(){return this.hideAndCloseOverlay(this.topOverlay,!0)}}class I{constructor(t,o,n){this.isOpen=!1,this.owner=t,this.overlayElement=n,this.interaction=o}static async open(t,o,n,i){const s=new I(t,o,n);return await s.open(i),()=>{s.close()}}static update(){const t=new CustomEvent("sp-update-overlays",{bubbles:!0,composed:!0,cancelable:!0});document.dispatchEvent(t)}async open({abortPromise:t,delayed:o,offset:n=0,placement:i="top",receivesFocus:s,notImmediatelyClosable:r,virtualTrigger:a,root:l}){if(this.isOpen)return!0;o===void 0&&(o=this.overlayElement.hasAttribute("delayed"));const h={color:void 0,scale:void 0,lang:void 0,theme:void 0},d=new CustomEvent("sp-query-theme",{bubbles:!0,composed:!0,detail:h,cancelable:!0});this.owner.dispatchEvent(d);const c={},f=new CustomEvent("sp-overlay-query",{bubbles:!0,composed:!0,detail:c,cancelable:!0});return this.overlayElement.dispatchEvent(f),await I.overlayStack.openOverlay(Object.assign({abortPromise:t,content:this.overlayElement,contentTip:c.overlayContentTipElement,delayed:o,offset:n,placement:i,trigger:this.owner,interaction:this.interaction,theme:h,receivesFocus:s,root:l,notImmediatelyClosable:r,virtualTrigger:a},c)),this.isOpen=!0,!0}close(){I.overlayStack.closeOverlay(this.overlayElement)}}I.overlayStack=new fe;export{I as Overlay};
